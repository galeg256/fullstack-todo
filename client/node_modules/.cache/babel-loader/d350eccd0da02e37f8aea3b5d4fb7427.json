{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User_ya\\\\Desktop\\\\repos\\\\fullstack-todo\\\\client\\\\src\\\\App.js\";\nimport React from 'react'; //App\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class App extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: /*#__PURE__*/_jsxDEV(ToDo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 8,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 12\n    }, this);\n  }\n\n} //ToDo\n\nclass ToDo extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      todos: [{\n        id: '1',\n        text: 'Купить хлеб'\n      }, {\n        id: '2',\n        text: 'Купить молоко'\n      }, {\n        id: '3',\n        text: 'Купить кофе'\n      }]\n    };\n    this.addTodo = this.addTodo.bind(this);\n    this.delTodo = this.delTodo.bind(this);\n    this.saveToDo = this.saveToDo.bind(this);\n  }\n\n  createID() {\n    //генератор id для list-item\n    while (true) {\n      const id = Math.floor(Math.random() * 1000); // от 1 до 9999\n\n      for (let i = 0; i < this.state.todos.length; i++) {\n        if (this.state.todos[i].id != id) return id.toString();\n      }\n    }\n  }\n\n  addTodo(newTodoText) {\n    // this.state.todos.unshift({id: '1', text: newTodoText})\n    // console.log(this.state.todos)\n    // this.setState({todos: this.state.todos})\n    this.setState(state => {\n      const cloneTodos = Object.assign([], state.todos); //клонирование массива\n      //Не может аншифтнуть в пустой массив\n\n      if (cloneTodos) cloneTodos.unshift({\n        id: this.createID(),\n        text: newTodoText\n      });else {\n        console.log('Enter in else'); // cloneTodos.splice(0, 0, {id: this.createID(), text: newTodoText} )\n      } // else cloneTodos.push({id: this.createID(), text: newTodoText})\n\n      return {\n        todos: cloneTodos\n      };\n    });\n  }\n\n  delTodo(delID) {\n    this.setState(state => {\n      const pos = state.todos.findIndex(value => value.id === delID);\n      const cloneTodos = Object.assign([], state.todos);\n      cloneTodos.splice(pos, 1);\n      return {\n        todos: cloneTodos\n      };\n    });\n  }\n\n  saveToDo(todo) {\n    let pos;\n\n    for (let i = 0; i < this.state.todos.length; i++) {\n      if (this.state.todos[i].id === todo.id) pos = i;\n    }\n\n    this.setState(state => {\n      const cloneTodos = Object.assign([], state.todos);\n      console.log(cloneTodos);\n      cloneTodos.splice(pos, 1, {\n        id: todo.id,\n        text: todo.textValue\n      });\n      console.log(cloneTodos);\n      return {\n        todos: cloneTodos\n      };\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"todo\",\n      children: [/*#__PURE__*/_jsxDEV(AddToDo, {\n        addTodo: this.addTodo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ListToDo, {\n        todos: this.state.todos,\n        delTodo: this.delTodo,\n        saveToDo: this.saveToDo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n\n} //AddToDo\n\n\nclass AddToDo extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      addText: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleAdd = this.handleAdd.bind(this);\n  }\n\n  handleChange(evt) {\n    this.setState({\n      addText: evt.target.value\n    });\n  }\n\n  handleAdd(evt) {\n    evt.preventDefault();\n    console.log('before call parent method');\n    this.props.addTodo(this.state.addText);\n    console.log('after call parent method');\n    this.setState({\n      addText: ''\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"todo__add\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"add__input\",\n        value: this.state.addText,\n        onChange: this.handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"add__button\",\n        onClick: this.handleAdd,\n        children: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this);\n  }\n\n} //ListToDo\n\n\nclass ListToDo extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      // changeMode: ['1'], //строковые id для тех строк, которые находятся в статусе на изменение  \n      // textValue: ''\n      changeMode: [// {id: '1', textValue: 'asd'}\n      ]\n    };\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeText = this.handleChangeText.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n  }\n\n  handleDelete(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const delID = evt.target.closest('.list__item').getAttribute('data-id');\n    this.props.delTodo(delID);\n  }\n\n  handleChange(evt) {\n    //добавляем моды в ChangeMode\n    const target = evt.target.closest('.list__item').getAttribute('data-id'); // console.log(target) //id изменяемого li\n\n    this.setState(state => {\n      const changeModeClone = Object.assign([], state.changeMode);\n      changeModeClone.push({\n        id: target,\n        textValue: ''\n      });\n      return {\n        changeMode: changeModeClone\n      };\n    });\n  }\n\n  handleChangeText(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const changeID = evt.target.closest('.list__item').getAttribute('data-id');\n    this.setState(state => {\n      const changeModeClone = Object.assign([], state.changeMode);\n\n      for (let i = 0; i < changeModeClone.length; i++) {\n        if (changeModeClone[i].id === changeID) {\n          changeModeClone[i].textValue = evt.target.value;\n          break;\n        }\n      }\n\n      return {\n        changeMode: changeModeClone\n      };\n    });\n  }\n\n  isChangeMode(id) {\n    let isMode = false;\n\n    for (let item of this.state.changeMode) {\n      if (item.id === id) {\n        isMode = true;\n      }\n    }\n\n    return isMode;\n  }\n\n  changeModePos(id) {\n    let pos;\n\n    for (let i = 0; i < this.state.changeMode.length; i++) {\n      if (this.state.changeMode[i].id === id) {\n        pos = i;\n      }\n    }\n\n    return pos;\n  }\n\n  handleSave(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const saveID = evt.target.closest('.list__item').getAttribute('data-id');\n    const pos = this.changeModePos(saveID); //позиция в массиве changeMode\n\n    this.props.saveToDo(this.state.changeMode[pos]); // console.log(this.state.changeMode[pos])\n\n    this.setState(state => {\n      const changeModeClone = Object.assign([], state.changeMode);\n      changeModeClone.splice(pos, 1);\n      return {\n        changeMode: changeModeClone\n      };\n    });\n  }\n\n  render() {\n    // console.log(this.isChangeMode('2'))\n    const todos = this.props.todos.map((value, index) => {\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"list__item\",\n        \"data-id\": value.id,\n        children: [// this.state.changeMode.includes({id: value.id, textValue: ''}) \n        this.isChangeMode(value.id) ? /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input__change\",\n          value: this.state.changeMode[this.changeModePos(value.id)].textValue,\n          onChange: this.handleChangeText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this) : `${index + 1}. ${value.text}`, this.isChangeMode(value.id) ? /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn__save\",\n          onClick: this.handleSave,\n          children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn__change\",\n          onClick: this.handleChange,\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn__delete\",\n          onClick: this.handleDelete,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 14\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"todo__list\",\n      children: todos\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/User_ya/Desktop/repos/fullstack-todo/client/src/App.js"],"names":["React","App","Component","render","ToDo","constructor","state","todos","id","text","addTodo","bind","delTodo","saveToDo","createID","Math","floor","random","i","length","toString","newTodoText","setState","cloneTodos","Object","assign","unshift","console","log","delID","pos","findIndex","value","splice","todo","textValue","AddToDo","addText","handleChange","handleAdd","evt","target","preventDefault","props","ListToDo","changeMode","handleDelete","handleChangeText","handleSave","closest","getAttribute","changeModeClone","push","changeID","isChangeMode","isMode","item","changeModePos","saveID","map","index"],"mappings":"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","sourcesContent":["import React from 'react'\n\n\n//App\nexport default class App extends React.Component {\n  render() {\n    return <div className='wrapper'>\n      <ToDo />\n    </div>\n  }\n}\n\n\n//ToDo\nclass ToDo extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      todos: [\n        {id: '1', text: 'Купить хлеб'},\n        {id: '2', text: 'Купить молоко'},\n        {id: '3', text: 'Купить кофе'}\n      ]\n    }\n\n    this.addTodo = this.addTodo.bind(this)\n    this.delTodo = this.delTodo.bind(this)\n    this.saveToDo = this.saveToDo.bind(this)\n  }\n\n  createID() { //генератор id для list-item\n    while(true) {\n      const id = Math.floor(Math.random() * 1000) // от 1 до 9999\n      for (let i=0; i<this.state.todos.length; i++) {\n        if (this.state.todos[i].id != id) return id.toString()\n      }\n    }\n  }\n\n  addTodo(newTodoText) {\n    // this.state.todos.unshift({id: '1', text: newTodoText})\n    // console.log(this.state.todos)\n    // this.setState({todos: this.state.todos})\n\n    this.setState( state => {\n      const cloneTodos = Object.assign([], state.todos) //клонирование массива\n      //Не может аншифтнуть в пустой массив\n      if (cloneTodos) cloneTodos.unshift({id: this.createID(), text: newTodoText})\n      else {\n        console.log('Enter in else')\n        \n        // cloneTodos.splice(0, 0, {id: this.createID(), text: newTodoText} )\n      }\n      // else cloneTodos.push({id: this.createID(), text: newTodoText})\n      return {todos: cloneTodos}\n    })\n  }\n\n  delTodo(delID) {\n    this.setState( state => {\n      const pos = state.todos.findIndex( value => value.id === delID)\n      const cloneTodos = Object.assign([], state.todos)\n      cloneTodos.splice(pos, 1)\n      return {todos: cloneTodos}\n    })\n  }\n\n  saveToDo(todo) {\n    let pos\n    for (let i=0; i<this.state.todos.length; i++) {\n      if (this.state.todos[i].id === todo.id) pos = i\n    }\n\n    this.setState( state => {\n      const cloneTodos = Object.assign([], state.todos)\n      console.log(cloneTodos)\n      cloneTodos.splice(pos, 1, {id: todo.id, text: todo.textValue})\n      console.log(cloneTodos)\n      return {todos: cloneTodos}\n    })\n\n  }\n\n  render() {\n    return (\n      <div className='todo'>\n        <AddToDo addTodo={this.addTodo}/>  \n        <ListToDo todos={this.state.todos} delTodo={this.delTodo} saveToDo={this.saveToDo}/>\n      </div>\n    )\n  }\n}\n\n\n//AddToDo\nclass AddToDo extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      addText: ''\n    }\n\n    this.handleChange = this.handleChange.bind(this)\n    this.handleAdd = this.handleAdd.bind(this)\n  }\n\n  handleChange(evt) {\n    this.setState({addText: evt.target.value})\n  }\n\n  handleAdd(evt) {\n    evt.preventDefault()\n    console.log('before call parent method')\n    this.props.addTodo(this.state.addText)\n    console.log('after call parent method')\n    this.setState({addText: ''}) \n  }\n\n  render() {\n    return (\n      <form className='todo__add'>\n        <input className='add__input' value={this.state.addText} onChange={this.handleChange}/>\n        <button className='add__button' onClick={this.handleAdd}>\n          Добавить  \n        </button>\n      </form>\n    )\n  }\n}\n\n\n//ListToDo\nclass ListToDo extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      // changeMode: ['1'], //строковые id для тех строк, которые находятся в статусе на изменение  \n      // textValue: ''\n\n      changeMode: [\n        // {id: '1', textValue: 'asd'}\n      ]\n    }\n\n    this.handleDelete = this.handleDelete.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.handleChangeText = this.handleChangeText.bind(this)\n\n    this.handleSave = this.handleSave.bind(this)\n  }\n\n  handleDelete(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const delID = evt.target.closest('.list__item').getAttribute('data-id')\n    this.props.delTodo(delID)\n  }\n\n  handleChange(evt) { //добавляем моды в ChangeMode\n    const target = evt.target.closest('.list__item').getAttribute('data-id')\n    // console.log(target) //id изменяемого li\n    this.setState( state => {\n      const changeModeClone = Object.assign([], state.changeMode)\n      changeModeClone.push({id: target, textValue: ''})\n      return {changeMode: changeModeClone}\n    })\n  }\n\n  handleChangeText(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const changeID = evt.target.closest('.list__item').getAttribute('data-id')\n    this.setState( state => {\n      const changeModeClone = Object.assign([], state.changeMode)\n      for (let i=0; i<changeModeClone.length; i++) {\n        if (changeModeClone[i].id === changeID) {\n          changeModeClone[i].textValue = evt.target.value\n          break\n        }\n      }\n      return {changeMode: changeModeClone}\n    })\n    \n  }\n\n  isChangeMode(id) {\n    let isMode = false\n    for (let item of this.state.changeMode) {\n      if (item.id === id) {\n        isMode = true\n      }\n    }\n    return isMode\n  }\n\n  changeModePos(id) {\n    let pos\n    for (let i=0; i<this.state.changeMode.length; i++) {\n      if (this.state.changeMode[i].id === id) {\n        pos = i\n      }\n    }\n    return pos\n  }\n\n  handleSave(evt) {\n    // console.log(evt.target.closest('.list__item').getAttribute('data-id'))\n    const saveID = evt.target.closest('.list__item').getAttribute('data-id')\n    const pos = this.changeModePos(saveID) //позиция в массиве changeMode\n\n    this.props.saveToDo(this.state.changeMode[pos])\n    // console.log(this.state.changeMode[pos])\n\n    this.setState( state => {\n      const changeModeClone = Object.assign([], state.changeMode)\n      changeModeClone.splice(pos, 1)\n      return {changeMode: changeModeClone}\n    })\n\n  }\n\n  render() {\n\n    // console.log(this.isChangeMode('2'))\n\n    const todos = this.props.todos.map( (value, index) => {\n      return <li className='list__item' key={index} data-id={value.id}>\n        { \n          // this.state.changeMode.includes({id: value.id, textValue: ''}) \n          this.isChangeMode(value.id)\n            ? <input className='input__change' value={this.state.changeMode[this.changeModePos(value.id)].textValue} onChange={this.handleChangeText}/> \n            :  `${index + 1}. ${value.text}`\n        }\n        { \n          this.isChangeMode(value.id)\n            ? <button className='btn__save' onClick={this.handleSave}>Сохранить</button> \n            : <button className='btn__change' onClick={this.handleChange}>Изменить</button>\n        }\n        <button className='btn__delete' onClick={this.handleDelete}>Удалить</button>\n      </li>\n    })\n\n    return (\n      <ul className='todo__list'>\n        {todos}\n      </ul>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}